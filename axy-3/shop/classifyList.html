<!DOCTYPE html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta content="" name="viewport">
<meta content="" name="keywords">
<meta name="viewport" content="width=device-width,initial-scale=1,user-scalable=no, minimal-ui" />
<link rel="stylesheet" type="text/css" href="../css/public.css">
<link rel="stylesheet" type="text/css" href="../css/classify.css">
<title>ibookway</title>
</head>
<body>
	<!-- ibookway-分类列表 -->
	<div class="classify List">
		<!-- navClass -->
		<div class="navClass">
			<a href="#"><img src="../images/ljt.png" /></a>
			<span>松江万达么么么么店松江万达么松江万达么么么么店松江万达么么么么店么么么店</span>
		</div>
		<!-- 地址 -->
		<div class="Location">
			<img src="../images/adress.png" />
			<p>地址：<span>上海市黄浦区xxxxxxxxxxxxxxxxxxxxxxxx上海市黄浦区xxxxxxxxxxxxxxxxxxxxxxxxxx</span></p>
		</div>
		<!-- 搜索 -->
		<div class="cl_search">
			<!-- 分类选择 -->
			<div class="flxz">
				<a href="javascript:void(0);"><img src="../images/fenlei.png" /><span>分类</span></a>
			</div>
			<div class="bjkS">
				<input id="sInfos" type="text" name="" placeholder="请输入书名/作者" />
				<img src="../images/delete.png" alt="" class="search-close disnone" id="sClose">
			</div>
		</div>
		<!-- 分类列表 -->
		<div class="ListCon" style="display: ;margin-top: 120px;">
			<!-- 智慧书房 -->
			<div class="scrollload-container LCcon2" style="display: ;">
				<ul class="scrollload-content"></ul>
			</div><!-- CLlink-end -->
			<!--  -->
			<div class="LCcon2" style="display: none;">
				<ul>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>我和幸福只差一个你</span>
						</a>
						<div class="borrowed"><span>已借出</span></div>
					</li>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>我和幸福只差一个你我和幸福只差一个你</span>
						</a>
					</li>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>我和幸福只差一个你我和幸福只差一个你</span>
						</a>
					</li>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>我和幸福只差一个你</span>
						</a>
					</li>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>我和幸福只差</span>
						</a>
					</li>
					<li>
						<a class="" href="#">
							<p><img class="Bimg" src="../images/img8.jpg" /></p>
							<span>sssssssssssssfffffffffffs</span>
						</a>
					</li>
				</ul>
				<div class="clear"></div>
			</div>
		</div><!--ListCon-end-->
		<!-- 分类列表 -->
		<div class="ClassList" style="display: none;">
			<!--screen-->
			<div class="screen">
				<ul>
					<li class="sel">全部</li>
					<li>考试教育</li>
					<li>文学艺术</li>
					<li>少儿读物</li>
					<li>婴幼启蒙</li>
					<li>经济管理</li>
					<li>成功励志</li>
					<li>科学技术</li>
					<li>生活百科</li>
					<li>人文社科</li>
				</ul>
			</div> 
			<!--con-->
			<div class="content">
				<!-- 全部 -->
				<div class="list"><a href="#">全部</a></div>
				<!-- 1 -->
				<div class="list" style="display: none;">
					<a href="classifyList.html">考试</a>
					<a href="#">外语</a>
					<a href="#">工具书</a>
					<a href="#">中小学教辅</a>
					<a href="#">大中专教辅</a>
					<a href="#">中小学课外</a>
					<a href="#">本科研究生</a>
					<a href="#">英语四六级</a>
					<a href="#">教师用书</a>
				</div>
				<!-- 2 -->
				<div class="list" style="display: none;">
					<a href="#">小说</a>
					<a href="#">文学</a>
					<a href="#">传记</a>
					<a href="#">艺术</a>
					<a href="#">摄影</a>
					<a href="#">书法</a>
					<a href="#">音乐</a>
					<a href="#">绘画</a>
					<a href="#">青春文学</a>
					<a href="#">动漫幽默</a>
					<a href="#">偶像明星</a>
				</div>
				<!-- 3 -->
				<div class="list" style="display: none;">
					<a href="#">儿童文学</a>
					<a href="#">儿童手工</a>
					<a href="#">科普百科</a>
					<a href="#">动漫卡通</a>
					<a href="#">少儿英语</a>
					<a href="#">励志成长</a>
					<a href="#">美术书法</a>
					<a href="#">音乐舞蹈</a>
					<a href="#">少儿期刊</a>
					<a href="#">智力游戏</a>
				</div>
				<!-- 4 -->
				<div class="list" style="display: none;">
					<a href="#">绘本</a>
					<a href="#">玩具书</a>
					<a href="#">认知书</a>
					<a href="#">游戏书</a>
					<a href="#">婴儿读物</a>
					<a href="#">益智启蒙</a>
					<a href="#">画图故事书</a>
				</div>
				<!-- 5 -->
				<div class="list" style="display: none;">
					<a href="#">经济</a>
					<a href="#">管理</a>
					<a href="#">金融</a>
					<a href="#">会记</a>
					<a href="#">投资理财</a>
					<a href="#">市场营销</a>
				</div>
				<!-- 6 -->
				<div class="list" style="display: none;">
					<a href="#">职场</a>
					<a href="#">励志成功</a>
					<a href="#">心灵修养</a>
					<a href="#">人际交往</a>
					<a href="#">人生哲学</a>
				</div>
				<!-- 7 -->
				<div class="list" style="display: none;">
					<a href="#">医学</a>
					<a href="#">建筑</a>
					<a href="#">科普读物</a>
					<a href="#">工业技术</a>
					<a href="#">自然科学</a>
					<a href="#">农业林业</a>
					<a href="#">电子通信</a>
					<a href="#">计算机网络</a>
				</div>
				<!-- 8 -->
				<div class="list" style="display: none;">
					<a href="#">两性</a>
					<a href="#">旅游</a>
					<a href="#">孕产育婴</a>
					<a href="#">亲子家教</a>
					<a href="#">保健养生</a>
					<a href="#">运动健身</a>
					<a href="#">烹饪食物</a>
					<a href="#">时尚美妆</a>
					<a href="#">手工DIY</a>
					<a href="#">家庭家居</a>
					<a href="#">风水占卜</a>
				</div>
				<!-- 9 -->
				<div class="list" style="display: none;">
					<a href="#">历史</a>
					<a href="#">文化</a>
					<a href="#">法律</a>
					<a href="#">心理学</a>
					<a href="#">国学古迹</a>
					<a href="#">哲学宗教</a>
					<a href="#">政治军事</a>
					<a href="#">社会科学</a>
				</div>
			</div><!--con-end-->
		</div><!--ClassList-end-->
	</div>
</body>
<script type="text/javascript" src="../js/jquery-1.10.1.min.js"></script>
<script type="text/javascript" src="lib/Scrollload.js"></script>
<script type="text/javascript">
	//无图片时替换图片
  t = document.getElementsByTagName("img");
  for(i = 0; i < t.length; i++){
      t.item(i).onerror = function(){
        // if(this.id =="defaultImg"){
            this.src = "../images/no-img.png";
            this.onerror = null;
          // }
      }
    }
</script>
<script type="text/javascript">
	$(function() {
    $('#sInfos').keyup(function(){
        var searchInfo = $('#sInfos').val();
        if(searchInfo != ''){
            $('#sClose').removeClass('disnone');
        }else{
            $('#sClose').addClass('disnone');
        }
    })

    $('#sClose').click(function(){
        $('#sInfos').val('');
        $('#sClose').addClass('disnone');
    })
});
</script>
<script type="text/javascript">
	// 切换
	$('.ClassList .screen li').click(function(){
		$(this).addClass('sel')
			.siblings().removeClass('sel');
			var index =  $('.ClassList .screen li').index(this); 
		$('.ClassList .content > div')
			.eq(index).show().siblings().hide();
	});
	// 消除最后横线
	$('.screen li:last').css('border-bottom','0');
	// 点击切换
	$('.flxz').click(function(){
		// $('.ListCon').toggle();
		$('.ClassList').toggle();
	});
</script>
<script type="text/javascript">
	let page = 1
	new Scrollload({
      // container 和 content 两个配置的默认取的scrollload-container和scrollload-content类的dom。只要你按照以上的dom结构写，这两个配置是可以省略的
      container: document.querySelector('.scrollload-container'),
    content: document.querySelector('.scrollload-content'),
    loadMore: function(sl) {
        
        if (page > 1) {
          // 没有数据的时候需要调用noMoreData
            sl.noMoreData()
            return
        }
        console.log(page);

        // 我这里用jquery的不是因为需要jquery，只是jquery的语法看起来比较简单。大家都认识。
        // 如果你不是用jquery，可以看看原生的insertAdjacentHTML方法来替代append
        $.ajax({
            type: 'GET',
            url: 'test.php',
            dataType: 'json',
            success: function(data){
            		page = page + 1;
            		console.log(data);
					var str = "";
					for (i in data) {
						str += '<li>';
						str += '<a href="#">';
						str += '<p>'+ '<img class="img" src="../images/img8.jpg" />'+'</p>';
						str += '<span>' + data[i].name + '</span>';
						str += '</a>';
						str += '</li>';
					}
                // contentDom其实就是你的scrollload-content类的dom
                $(sl.contentDom).append(str)

                // 处理完业务逻辑后必须要调用unlock
                sl.unLock()
            },
            error: function(xhr, type){
                // 加载出错，需要执行该方法。这样底部DOM会出现出现异常的样式。
                sl.throwException()
            }
        })
    },
    // 你也可以关闭下拉刷新
    enablePullRefresh: false,
    pullRefresh: function (sl) {
    	if(page == 6){
    		return false;
    	}
        $.ajax({
            type: 'GET',
            url: 'test.php',
            dataType: 'json',
            success: function(data){
            	console.log(data);
                $(sl.contentDom).prepend(data)

                // 处理完业务逻辑后必须要调用refreshComplete
                sl.refreshComplete()
            }
        })
    }
})
</script>
</html>